{% extends "base.twig" %}

{% block title %}{{ autor.id ? 'Editar' : 'Crear' }} Autor{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">{{ autor.id ? 'Editar' : 'Crear' }} Autor</h3>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ app_url }}autores{{ autor.id ? '/' ~ autor.id : '' }}">
                        {% if autor.id %}
                            <input type="hidden" name="_method" value="PUT">
                        {% endif %}

                        <div class="form-group">
                            <label for="apellidos">Apellidos *</label>
                            <input type="text" class="form-control" id="apellidos" name="apellidos" 
                                   value="{{ formData.apellidos|default('') }}" required>
                        </div>

                        <div class="form-group">
                            <label for="nombres">Nombres *</label>
                            <input type="text" class="form-control" id="nombres" name="nombres" 
                                   value="{{ formData.nombres|default('') }}" required>
                        </div>

                        <div class="form-group">
                            <label for="genero">Género *</label>
                            <select class="form-control" id="genero" name="genero" required>
                                <option value="">Seleccione un género</option>
                                <option value="Femenino" {{ formData.genero == 'Femenino' ? 'selected' : '' }}>Femenino</option>
                                <option value="Masculino" {{ formData.genero == 'Masculino' ? 'selected' : '' }}>Masculino</option>
                                <option value="Otro" {{ formData.genero == 'Otro' ? 'selected' : '' }}>Otro</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Guardar
                            </button>
                            <a href="{{ app_url }}autores" class="btn btn-secondary">
                                <i class="fas fa-times"></i> Cancelar
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Script para mostrar mensajes flash -->
<script>
{% if session.flash_message is defined %}
    Swal.fire({
        icon: '{{ session.flash_message.type }}',
        title: '{{ session.flash_message.message }}',
        showConfirmButton: false,
        timer: 3000
    });
    // Limpiar el mensaje flash después de mostrarlo
    {% set flash_message = session.flash_message %}
    {% do session.remove('flash_message') %}
{% endif %}
</script>
{% endblock %} 